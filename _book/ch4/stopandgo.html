
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Stop & Go Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="lightbot.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../ch1/">
            
                <a href="../ch1/">
            
                    
                    Robots are fun?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../ch1/schedule.html">
            
                <a href="../ch1/schedule.html">
            
                    
                    Schedule of Activities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../ch2/">
            
                <a href="../ch2/">
            
                    
                    Particle Core Development Setup
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../ch2/installation.html">
            
                <a href="../ch2/installation.html">
            
                    
                    Install Node.js and Particle CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../ch2/particleSetup.html">
            
                <a href="../ch2/particleSetup.html">
            
                    
                    Particle Core Setup
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../ch3/">
            
                <a href="../ch3/">
            
                    
                    Sumobot Instructions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../ch3/helloworld.html">
            
                <a href="../ch3/helloworld.html">
            
                    
                    Hello World
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../ch3/assembly.html">
            
                <a href="../ch3/assembly.html">
            
                    
                    Assembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../ch3/connectParticleCore.html">
            
                <a href="../ch3/connectParticleCore.html">
            
                    
                    Connecting the brain (Particle Core)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./">
            
                    
                    Coding Up Your New Robot!
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.1" data-path="stopandgo.html">
            
                <a href="stopandgo.html">
            
                    
                    Stop & Go
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="lightbot.html">
            
                <a href="lightbot.html">
            
                    
                    Lightbot
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../ch5/">
            
                <a href="../ch5/">
            
                    
                    Resources/Links for Making Robots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../ch6/">
            
                <a href="../ch6/">
            
                    
                    What Now? What to do when Robot comes home.
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../ch7/">
            
                <a href="../ch7/">
            
                    
                    Special Thanks and Sponsors
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Stop & Go</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="stop--go-project">Stop &amp; Go project</h1><p>This customization will add two LED&#x2019;s, red and green, that light up according to the state of the SumoBot: red if stopped and green if moving. This may not seem like a very interesting customization since you can observe this state by just looking at the bot, but it serves to expose you to programming other forms of output with the existing control mechanism.</p><p>The following items can be found at AdaFruit.com:</p><ul><li><a href="http://www.adafruit.com/products/297" target="_blank">Red LED</a>
</li>
<li><a href="http://www.adafruit.com/products/300" target="_blank">Green LED</a>
</li></ul>
<p><img alt="Sumo LEDs" src="../images/sumo-leds.jpg"></p><p>The following diagram describe the circuit layout for the controller board:</p><p><img alt="Circuit Layout" src="../images/sumo-leds-spark-circuit.png"></p><p>Here&apos;s the code that will run the Stop &amp; Go:</p><pre><code class="lang-js">
<span class="hljs-keyword">var</span> keypress = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;keypress&quot;</span>);
<span class="hljs-keyword">var</span> Spark = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;spark-io&quot;</span>);
<span class="hljs-keyword">var</span> five = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;johnny-five&quot;</span>);
<span class="hljs-keyword">var</span> Sumobot = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;sumobot&quot;</span>)(five);

keypress(process.stdin);

<span class="hljs-keyword">var</span> board = <span class="hljs-keyword">new</span> five.Board({
  io: <span class="hljs-keyword">new</span> Spark({
    token: process.env.SPARK_TOKEN,
    deviceId: process.env.SPARK_DEVICE
  })
});

board.on(<span class="hljs-string">&quot;ready&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Welcome to Sumobot Jr: Stop &amp; Go!&quot;</span>);

  <span class="hljs-keyword">var</span> bot = <span class="hljs-keyword">new</span> Sumobot({
    left: <span class="hljs-string">&quot;D0&quot;</span>,
    right: <span class="hljs-string">&quot;D1&quot;</span>,
    speed: <span class="hljs-number">0.50</span>
  });

  <span class="hljs-keyword">var</span> red = <span class="hljs-keyword">new</span> five.Led(<span class="hljs-string">&quot;D4&quot;</span>);
  <span class="hljs-keyword">var</span> green = <span class="hljs-keyword">new</span> five.Led(<span class="hljs-string">&quot;D3&quot;</span>);
  <span class="hljs-keyword">var</span> leds = <span class="hljs-keyword">new</span> five.Leds([red, green]);

  <span class="hljs-comment">// Maps key names to bot methods</span>
  <span class="hljs-keyword">var</span> actions = {
    up: <span class="hljs-string">&quot;fwd&quot;</span>,
    down: <span class="hljs-string">&quot;rev&quot;</span>,
    left: <span class="hljs-string">&quot;left&quot;</span>,
    right: <span class="hljs-string">&quot;right&quot;</span>,
    space: <span class="hljs-string">&quot;stop&quot;</span>
  };

  <span class="hljs-comment">// Ensure the bot is stopped</span>
  bot.stop();
  leds.off();

  <span class="hljs-comment">// A bit of keypress ceremony ;)</span>
  process.stdin.resume();
  process.stdin.setEncoding(<span class="hljs-string">&quot;utf8&quot;</span>);
  process.stdin.setRawMode(<span class="hljs-literal">true</span>);

  process.stdin.on(<span class="hljs-string">&quot;keypress&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ch, key</span>) </span>{
    <span class="hljs-keyword">var</span> action;

    <span class="hljs-keyword">if</span> (!key) {
      <span class="hljs-keyword">return</span>;
    }

    leds.off();

    action = actions[key.name] || key.name;

    <span class="hljs-keyword">if</span> (action == <span class="hljs-string">&quot;q&quot;</span>) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Quitting&quot;</span>);
      bot.stop();
      setTimeout(process.exit, <span class="hljs-number">500</span>);
    }

    <span class="hljs-keyword">if</span> (bot[action]) {
      bot[action]();

      <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&quot;stop&quot;</span>) {
        red.on();
      } <span class="hljs-keyword">else</span> {
        green.on();
      }
    }
  });
});
</code></pre>
<p>Don&apos;t forget, for the above code to work, you&apos;ll need to install the node modules:</p><p><code>npm install keypress spark-io johnny-five sumobot</code></p><p>Here&apos;s a video of it in action:</p><video controls class="blog-full-width-block" style="display: inline-block;width: 100%;margin: 0 0 1em 0;">
  <source src="https://dl.dropboxusercontent.com/u/3531958/sumobot/sumo-stop-go.mp4">
  <source src="https://dl.dropboxusercontent.com/u/3531958/sumobot/sumo-stop-go.webm">  
  <source src="https://dl.dropboxusercontent.com/u/3531958/sumobot/sumo-stop-go.ogv">
  <iframe width="420" height="315" src="//www.youtube.com/embed/wC86w0fX79s" frameborder="0" allowfullscreen></iframe>
</video>



<p>These instructions are adapted from <a href="https://bocoup.com/weblog/customizing-the-robotsconf-sumobot-with-johnny-five/" target="_blank">Customizing the RobotsConf Sumobot with Johnny-Five</a> by <a href="https://twitter.com/rwaldron" target="_blank">Rick Waldron, creator of Johnny Five</a></p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Coding Up Your New Robot!">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="lightbot.html" class="navigation navigation-next " aria-label="Next page: Lightbot">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Stop & Go","level":"1.6.1","depth":2,"next":{"title":"Lightbot","level":"1.6.2","depth":2,"path":"ch4/lightbot.md","ref":"ch4/lightbot.md","articles":[]},"previous":{"title":"Coding Up Your New Robot!","level":"1.6","depth":1,"path":"ch4/README.md","ref":"ch4/README.md","articles":[{"title":"Stop & Go","level":"1.6.1","depth":2,"path":"ch4/stopandgo.md","ref":"ch4/stopandgo.md","articles":[]},{"title":"Lightbot","level":"1.6.2","depth":2,"path":"ch4/lightbot.md","ref":"ch4/lightbot.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"ch4/stopandgo.md","mtime":"2016-07-30T02:49:37.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-07-30T03:33:37.590Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

